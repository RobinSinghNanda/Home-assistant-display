var cPI=0,gC=[{}],nI="mdi-dots-square";function paY(){var e=ace.edit("ed");try{var t=e.getValue();cPI>=0&&cPI<gC.length&&(gC[cPI]=""==t?{}:YAML.parse(t))}catch(e){}}function dH(e,t,n,s){var i="<div id='header'>";if(""!=e&&(i+="<span class='iwrap'><span class='mdi "+e+" ic'></span></span>"),i+="<span class='text'>"+t+"</span>",i+="<span style='float:right;' class='iwrap'><span class='mdi mdi-cog ic'></span></span>",i+="<span style='float:right;' class='iwrap'><span class='mdi mdi-wifi-lock ic'></span></span>",s>1){i+="<span class='pagei' style='float:right;width:"+20*s+"px' ><svg style='width:"+20*s+"px;height:40px;'>";for(var a=0;a<s;a++)i+="<ellipse style='fill:#"+(a==n?"00a1f2":"FFFFFF")+";' cx='"+(20*a+10)+"' cy='20' rx='3' ry='3'></ellipse>";i+="</svg></span>"}return i+="</div>"}function dER(e){return"object"==typeof e?null==e.type?null!=e.entity?dSR(null!=e.icon?gI(e.icon):nI,null!=e.name?e.name:e.entity):"<div class='text erow'><p>ERROR:entity is not defined</p></div>":"custom:paper-buttons-row"==e.type?dBR(e):"<div class='erow text'><p>ERROR:entity "+e.type+" type is not supported</p></div>":dSR(nI,e)}function dB(e){if("entities"!=e.type)return null==e.type?"<div></div>":"<div class='ecard text'>Error:"+e.type+" type is not supported</div>";var t=e.entities;if(null==t)return"<div class='ecard text'>Error:entites is not defined</div>";if(Array.isArray(t)){var n="<div class='body'>";for(var s in t)n+=dER(t[s]);return n+"</div>"}return null!=e.type?"<div class='ecard text'>Error:entites is not defined</div>":void 0}function dSR(e,t){return"<div class='row'><span class='iwrap'><span class='ic mdi "+e+"' style='color:#376888;'></span></span><span class='text'>"+t+"</span><span class='sww'><img class='sw' src='sw-on.jpg'></span></div>"}function dBR(e){if(null!=e.buttons&&Array.isArray(e.buttons)){var t="<div class='row' style='text-align:justify;'>";for(i in e.buttons){var n=e.buttons[i].icon;t+="<span class='iwrap' style='width:"+100/e.buttons.length+"%;'><span class='ic mdi "+(null!=n?gI(n):nI)+"' style='color:#376888;'></span></span>"}return t+="</div>"}}function gI(e){return nI+" "+e.replace("mdi:","mdi-")}function drS(){if(!(cPI<0||cPI>=gC.length)){var e=gC[cPI];if(null!=e)eb("screen").innerHTML=dH(null!=e.icon?gI(e.icon):"",null!=e.title?e.title:"",cPI,gC.length)+dB(e)}}function ldB(){var e="";for(var t in gC){var n=parseInt(t)+1,s="card"+n;e+="<input id='"+s+"' type='radio' name='cS' value='"+s+"' "+(n==cPI+1?"checked":"")+"/>",e+="<label for='"+s+"' onclick='sC("+n+")'>"+n+"</label>"}eb("cas").innerHTML=e}function oLC(){if(eb("ed")){rld(),ace.config.set("basePath","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/");var e=ace.edit("ed");e.setTheme("ace/theme/chrome"),e.session.setMode("ace/mode/yaml"),e.getSession().on("change",function(){paY(),drS()}),e.renderer.setShowGutter(!1);var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(gC=JSON.parse(this.responseText),rld())},t.open("GET","/cards.json",!0),t.send()}}function rC(){var e=[],t=0;if(1==gC.length)return gC[0]={},void rld();for(var n=0;n<gC.length;n++)n!=cPI&&(e[t]=gC[n],t++);gC=e,cPI>0&&cPI--,rld()}function aC(){gC.length>=5||(gC[gC.length]={},rld())}function rld(){ldY(),ldB(),drS()}function sC(e){e>0&&e<=gC.length&&(cPI=e-1,rld())}function ldY(){if(0!=gC.length&&cPI>=0&&cPI<gC.length){var e=YAML.stringify(gC[cPI],5),t=ace.edit("ed");"{}"==e?t.setValue("",-1):t.setValue(e,-1)}}function svC(){var e=new XMLHttpRequest;e.open("POST","/ca?save=1"),e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.open(),document.write(e.responseText),document.close())},e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(gC))}wl(oLC);